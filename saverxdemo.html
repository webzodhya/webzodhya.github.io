<!DOCTYPE html>
<html>
<!--From https://codepen.io/frytyler/pen/EGdtg-->

<head>
  <meta charset="UTF-8">
  <title>SaverX Demo</title>
  <link href='https://fonts.googleapis.com/css?family=Pacifico' rel='stylesheet' type='text/css'>
  <link href='https://fonts.googleapis.com/css?family=Arimo' rel='stylesheet' type='text/css'>
  <link href='https://fonts.googleapis.com/css?family=Hind:300' rel='stylesheet' type='text/css'>
  <link href='https://fonts.googleapis.com/css?family=Open+Sans+Condensed:300' rel='stylesheet' type='text/css'>
  <!-- <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">  -->
  <link rel="stylesheet" href="https://latex.now.sh/style.css">
</head>

<body>
  <div class="login">
    <h1>Saver-X Demo</h1>

    <button id="fill-form-btn" type="button">Fill in default values</button>
    <p></p>

    <img src="./assets/images/temp/comp.gif" height="250" width="250">

    <h3>Building Information</h3>
    <b>2 Water Cooled Chillers</b>
    <b>4 AHUs</b>
    <b>Large Office Model</b>
    <b>Chennai</b>
    <b>Simulated for </b>

    <table>
      <form method="post" id="saverxDemoForm">
        <tr>
          <td><label for="Cooling Water Temperature Setpoint">Cooling Water Temperature Setpoint</label></td>
          <td><input type="text" id="Cooling_Water_Temperature_Setpoint" name="Cooling_Water_Temperature_Setpoint"
              placeholder="In Celsius" required="required" /></td>
        </tr>
        <tr>
          <td><label for="Chiller Temperature">Chiller Temperature</label></td>
          <td><input type="text" id="Chiller_Temperature" name="Chiller_Temperature" placeholder="In Celsius"
              required="required" /></td>
        </tr>
        <tr>
          <td><label for="AHU 1 Opening %">AHU 1 Opening %</label></td>
          <td><input type="text" id="AHU_1_Opening" name="AHU_1_Opening" placeholder="In Celsius"
              required="required" /></td>
        </tr>
        <tr>
          <td><label for="AHU 2 Opening %">AHU 2 Opening %</label></td>
          <td><input type="text" id="AHU_2_Opening" name="AHU_2_Opening" placeholder="Number" required="required" />
          </td>
        </tr>
        <tr>
          <td><label for="AHU 3 Opening %">AHU 3 Opening %</label></td>
          <td><input type="text" id="AHU_3_Opening" name="AHU_3_Opening" placeholder="In Celsius"
              required="required" /></td>
        </tr>
        <tr>
          <td><label for="AHU 4 Opening %">AHU 4 Opening %</label></td>
          <td><input type="text" id="AHU_4_Opening" name="AHU_4_Opening" placeholder="In Celsius"
              required="required" /></td>
        </tr>
        <tr>
          <td>
            <button type="submit" class="btn btn-primary btn-block btn-large">Simulate Energy
              Consumption with Model</button>
          </td>
        </tr>
      </form>
    </table>
    <br>
    <br>

    <h5 id="optimalresult" class="alert alert-dark" role="alert"></h5>

    <img src='assets/images/temp/output.png'>

    <script>
      function fillForm() {
        // fill in the form elements with values from the selected row
        document.getElementById("Cooling_Water_Temperature_Setpoint").value = 7;
        document.getElementById("Chiller_Temperature").value = 30;
        document.getElementById("AHU_1_Opening").value = 0.9;
        document.getElementById("AHU_2_Opening").value = 0.9;
        document.getElementById("AHU_3_Opening").value = 0.9;
        document.getElementById("AHU_4_Opening").value = 0.9;
      };


      var fillFormBtn = document.getElementById("fill-form-btn");
      fillFormBtn.addEventListener("click", fillForm);
    </script>


    <script>
      const saverxDemoForm = document.getElementById('saverxDemoForm');
      saverxDemoForm.addEventListener('submit', async function (e) {
        e.preventDefault();

        const formData = new FormData(saverxDemoForm).entries()
        try {
          const response = await fetch('https://yashwanthzodhya.pythonanywhere.com/saverxpredict_api', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(Object.fromEntries(formData))
          });

          const result = await response.json();
          let energy_consumption_without_model = result.energy_consumption_without_model
          let total_energy_consumption = result.total_energy_consumption

          let showdata = `Predicted Energy Consumption:${total_energy_consumption} kWh, Energy Consumption Without Model: ${energy_consumption_without_model} kWh`
          document.getElementById('optimalresult').innerHTML = showdata

        } catch (error) {
          console.log(error);
        }


      })


    </script>

  </div>
</body>

</html>